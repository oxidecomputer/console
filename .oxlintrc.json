{
  "$schema": "./node_modules/oxlint/configuration_schema.json",
  "jsPlugins": [
    {
      "name": "playwright",
      "specifier": "eslint-plugin-playwright"
    }
    // eslint-plugin-react-hook-form won't work â€” all its rules use context.getScope()
  ],
  "plugins": [
    "import",
    "react",
    "jsx-a11y",
    "promise",
    // defaults (see https://oxc.rs/docs/guide/usage/linter/plugins.html#supported-plugins)
    "eslint",
    "unicorn",
    "typescript",
    "oxc"
  ],
  "categories": {
    "correctness": "error"
  },
  "rules": {
    // only worry about console.log
    "no-console": ["error", { "allow": ["warn", "error", "info", "table"] }],
    "no-unused-vars": [
      "error",
      {
        "argsIgnorePattern": "^_",
        "varsIgnorePattern": "^_",
        "caughtErrorsIgnorePattern": "^_"
      }
    ],

    "react/button-has-type": "error",
    "react/jsx-boolean-value": "error",

    "react-hooks/exhaustive-deps": "error",
    "react-hooks/rules-of-hooks": "error",
    "import/no-default-export": "error",
    "consistent-type-imports": "error",

    // Missing ESLint core rules
    "eqeqeq": ["error", "always", { "null": "ignore" }],
    "no-param-reassign": "error",
    "no-return-assign": "error",
    "no-restricted-imports": [
      "error",
      {
        // prevent confusion due to auto-imports and barrel files
        "paths": ["."],
        "patterns": [
          // import all CSS except index.css at top level through CSS @import statements
          // to avoid bad ordering situations. See https://github.com/oxidecomputer/console/pull/2035
          "*.css"
        ]
      }
    ],
    "radix": "error",

    "@typescript-eslint/no-explicit-any": "error",

    // TypeScript rules (currently disabled but available)
    "@typescript-eslint/no-floating-promises": "off",
    "@typescript-eslint/unbound-method": "off"
  },
  "overrides": [
    {
      // default exports are needed in the route modules and the config files,
      // but we want to avoid them anywhere else
      "files": [
        "app/pages/**/*",
        "app/layouts/**/*",
        "app/forms/**/*",
        "*.config.ts",
        "*.config.mjs"
      ],
      "rules": {
        "import/no-default-export": "off"
      }
    },
    {
      // catch unawaited Playwright calls in e2e tests
      "files": ["test/e2e/**/*.ts"],
      "rules": {
        "@typescript-eslint/no-floating-promises": "error",
        "playwright/expect-expect": [
          "warn",
          {
            "assertFunctionNames": [
              "expectVisible",
              "expectRowVisible",
              "expectOptions",
              "expectRowMenuStaysOpen"
            ]
          }
        ],
        "playwright/no-force-option": "off"
      }
    }
  ],
  "ignorePatterns": ["dist/", "node_modules/"]
}
