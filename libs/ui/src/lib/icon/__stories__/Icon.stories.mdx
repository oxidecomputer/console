<!-- Icons.stories.mdx-->

import { ArgsTable, Canvas, Story, Meta } from '@storybook/addon-docs/blocks'

import { Icon } from '../Icon'
import { icons } from '../icons'
import { Default, CustomTitle, Rotate } from './Icon.stories'

<Meta
  title="Foundations/Icon"
  component={Icon}
  argTypes={{
    name: {
      control: {
        type: 'select',
        options: Object.keys(icons),
      },
    },
    ref: { table: { disable: true } },
    theme: { table: { disable: true } },
    font: { table: { disable: true } },
    weight: { table: { disable: true } },
    svgProps: { table: { disable: true } },
  }}
/>

# Icons

Icons are rendered as inline SVGS using the [SVGR loader](https://react-svgr.com/docs/getting-started/). Rendering them inline means their `fill` color can be changed via CSS. With twin.macro this can be done with `tw="text-green"`.

<Canvas>
  <Story story={Default} />
</Canvas>

<ArgsTable of={Icon} story="^" />

## Accessibility

Each `.svg` icon should follow [accessibility best practices](https://www.deque.com/blog/creating-accessible-svgs/). In this case, it means making sure of the following:

- the parent `<svg>` tag has `role="img"` to ensure it gets treated as an image
- and the first child should be a `<title>` tag

The `name` prop matches the contents of the `<title>` tag so that you know what screenreaders will be reading. Since each icon is read by a screenreader, treat them as additional text when composing them with other elements.

For example, the following composition:

```tsx
<Icon name="bookmark" /> Settings
```

will output something like "Bookmark (image) Settings" or "Bookmark (graphic) Settings" to the user depending on their software and browser combination.

**Note:**

The `<Icon>` component will take care of adding a unique identifier for the `aria-labelledby` and `id` attributes. The `titleProp` flag is set to `true` in the [SVGR Title options](https://react-svgr.com/docs/options/#title). Relying on `<Icon>` to create a unique `titleId` will ensure there are never duplicate IDs in the DOM.

If, for some reason, you need to know the ID, you can pass one yourself:

```jsx
/* Icon component will take care of creating the `titleId` for you */
<Icon svgProps={{ title: 'Cameron Howe', titleId: 'avatar-cameron-howe' }} />
```

## All icons

<div style={{ display: 'flex', flexWrap: 'wrap', marginTop: '1rem' }}>
  {Object.keys(icons).map((key) => (
    <div
      style={{
        display: 'flex',
        alignItems: 'center',
        padding: '0.5rem',
        fontSize: '2rem',
        width: 200,
      }}
    >
      <Icon name={key} style={{ marginRight: '1rem' }} />
      <code>{key}</code>
    </div>
  ))}
</div>

## Stories

### Rotate

Icon rotation is handled through the `tw` prop: `tw="transform rotate-45"`.

<Canvas>
  <Story name="Rotate">
    <Rotate />
  </Story>
</Canvas>

### Icon with custom Title tag

<Canvas>
  <Story story={CustomTitle} />
</Canvas>
